<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>A little thought on SQL query performance optimization 1 - Herman-blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Icaurs - Hexo Theme"><meta name="msapplication-TileImage" content="/img/favicon1.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Icaurs - Hexo Theme"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="Working with data and database, writing query is daily routine, query running time might be big different for different queries but serve the same purpose, which shows query performance is not 100 per"><meta property="og:type" content="blog"><meta property="og:title" content="A little thought on SQL query performance optimization 1"><meta property="og:url" content="https://hermanteng19.github.io/2020/11/30/A-little-thought-on-SQL-query-performance-optimization-1/"><meta property="og:site_name" content="Herman-blog"><meta property="og:description" content="Working with data and database, writing query is daily routine, query running time might be big different for different queries but serve the same purpose, which shows query performance is not 100 per"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://hermanteng19.github.io/img/querytuning.jpg"><meta property="article:published_time" content="2020-12-01T01:44:25.000Z"><meta property="article:modified_time" content="2020-12-14T03:47:29.479Z"><meta property="article:author" content="Herman Teng"><meta property="article:tag" content="SQL, query, SQL Server, optimization"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/querytuning.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hermanteng19.github.io/2020/11/30/A-little-thought-on-SQL-query-performance-optimization-1/"},"headline":"Herman-blog","image":["https://hermanteng19.github.io/img/querytuning.jpg"],"datePublished":"2020-12-01T01:44:25.000Z","dateModified":"2020-12-14T03:47:29.479Z","author":{"@type":"Person","name":"Herman Teng"},"description":"Working with data and database, writing query is daily routine, query running time might be big different for different queries but serve the same purpose, which shows query performance is not 100 per"}</script><link rel="canonical" href="https://hermanteng19.github.io/2020/11/30/A-little-thought-on-SQL-query-performance-optimization-1/"><link rel="icon" href="/img/favicon1.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/avatar1.png" alt="Herman-blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/img/querytuning.jpg" alt="A little thought on SQL query performance optimization 1"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-12-01T01:44:25.000Z" title="2020-12-01T01:44:25.000Z">2020-11-30</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-12-14T03:47:29.479Z" title="2020-12-14T03:47:29.479Z">2020-12-13</time></span><span class="level-item"><a class="link-muted" href="/categories/Data/">Data</a></span><span class="level-item">8 minutes read (About 1155 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">A little thought on SQL query performance optimization 1</h1><div class="content"><p>Working with data and database, writing query is daily routine, query running time might be big different for different queries but serve the same purpose, which shows query performance is not 100 percent determined by database system configuration, server hard ware, table index and statistics etc. but how well do you use SQL to construct your query. </p>
<p>To satisfy user strong demand, we built sandbox database on production for business partners to server their needs of BI reporting and business analytical, in the meanwhile, we are also in charge of database maintenance and monitoring so that we got chance to collect all kinds of user queries. Some of them even crash the system or drag the database performance down apparently, here I want to share my thinking of query optimization on large amount of data.</p>
<h2 id="Before-writing-a-query"><a href="#Before-writing-a-query" class="headerlink" title="Before writing a query"></a>Before writing a query</h2><p>Just like a project, a query is able to achieve the things with backend business logics even if it is small, so make a plan before creation is very necessary to be able to let the query return result in flash and only consume minimum system resources.</p>
<ul>
<li>What level detail of data do you want to query from? Business data is built on certain level, e.g. in common scenario, there are customer level, account level and transaction level data. It’s better clarify target data is on which level or mix different level.</li>
<li>What the time scope? The data amount volume would be big if you want to query multiple years even months, so if you evaluate the data is big, it’s better use loop or paging technic instead of returning outcome in one single page.</li>
<li>What are query tables look like? A table contains a lot of information, not only business attributes or columns but data type, keys, index, constraints, triggers. Familiar with table structure is going to give additional benefits when you write your queries against those tables.</li>
</ul>
<a id="more"></a>

<h2 id="SQL-query-optimization-tips"><a href="#SQL-query-optimization-tips" class="headerlink" title="SQL query optimization tips"></a>SQL query optimization tips</h2><ul>
<li><strong>Correlated and uncorrelated subquery</strong></li>
</ul>
<p>Business often asks about the highest transaction information in terms of product, product group, merchant category etc. in certain month or quarter. For this kind of request is not straight forward to be solved by single select from query but it needs subquery. Now let’s see what I got from a business partner</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> tran_date, Product_cd, Merchant_Name, Trans_Amt</span><br><span class="line"><span class="keyword">from</span> trans a</span><br><span class="line"><span class="keyword">where</span> tran_date <span class="keyword">between</span> <span class="string">&#x27;2020-10-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;2020-10-31&#x27;</span> <span class="keyword">and</span> trans_Amt=(</span><br><span class="line">	<span class="keyword">select</span> <span class="keyword">Max</span>(b.Trans_Amt)</span><br><span class="line">	<span class="keyword">from</span> trans b</span><br><span class="line">    <span class="keyword">where</span> a.product_cd=b.product_cd <span class="keyword">and</span> tran_date <span class="keyword">between</span> <span class="string">&#x27;2020-10-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;2020-10-31&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> Product_cd</span><br></pre></td></tr></table></figure>

<p>subquery is correlated with main query so <code>trans</code> data is loaded into memory again and make a calculation to return data to main query, that query execution time is 32s based on 90mm data. What if change correlated to uncorrelated subquery like below</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> tran_date, Product_cd, Merchant_Name, Trans_Amt</span><br><span class="line"><span class="keyword">from</span> trans a</span><br><span class="line"><span class="keyword">join</span> (</span><br><span class="line"><span class="keyword">select</span> Product_cd, <span class="keyword">Max</span>(Trans_Amt) <span class="keyword">as</span> Trans_Amt, tran_date</span><br><span class="line">    <span class="keyword">from</span> trans</span><br><span class="line">    <span class="keyword">where</span> tran_date <span class="keyword">between</span> <span class="string">&#x27;2020-10-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;2020-10-31&#x27;</span></span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> Producct_cd, tran_date</span><br><span class="line">) <span class="keyword">as</span> b</span><br><span class="line"><span class="keyword">on</span> a.Product_cd=b.Product_cd <span class="keyword">and</span> a.Trans_Amt=b.Trans_Amt <span class="keyword">and</span> a.tran_date=b.tran_date</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> a.Product_cd</span><br></pre></td></tr></table></figure>

<p>the query execution time reduce to 26s.</p>
<ul>
<li><strong>Exists clause and table join</strong></li>
</ul>
<p>The most active accounts and their corresponding spending amount is another important KPI for product manage from account management perspective, additionally, if some condition applied such as account opened on certain month, we got the query from one business partner using <code>exists</code> statement down below</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> acct_id, trans_dt,<span class="keyword">count</span>(*) <span class="keyword">as</span> num_trans, <span class="keyword">sum</span>(trans_amt) <span class="keyword">as</span> tot_trans_amt</span><br><span class="line"><span class="keyword">from</span> trans a</span><br><span class="line"><span class="keyword">where</span> date_key=<span class="number">202010</span> <span class="keyword">and</span> <span class="keyword">exists</span>(</span><br><span class="line"><span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> acct b <span class="keyword">where</span> a.date_key=b.date_key <span class="keyword">and</span> a.acct_id=b.acct_id <span class="keyword">and</span> <span class="keyword">year</span>(acct_open_dt)*<span class="number">100</span>+<span class="keyword">month</span>(acct_open_dt)&gt;=<span class="number">202009</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> trans_dt, acct_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(acct_id)&gt;<span class="number">10</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> num_trans <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>

<p>from the query structure, we might be able to tell <code>exists</code> statement was put in <code>where</code> clause to get the account open date, its execution time is 13s, but it’s obviously not thinking about the whole business logic before, if the query changed to get target accounts for account open date first then did the calculation, the execution time will reduce to 3s like below</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.acct_id, a.trans_dt, <span class="keyword">count</span>(*) <span class="keyword">as</span> num_trans, <span class="keyword">sum</span>(trans_amt) <span class="keyword">as</span> tot_trans_amt</span><br><span class="line"><span class="keyword">from</span> trans a <span class="keyword">join</span> acct b <span class="keyword">on</span> a.acct_id=b.acct_id <span class="keyword">and</span> a.date_key=b.date_key</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">year</span>(b.acct_open_dt)*<span class="number">100</span>+<span class="keyword">month</span>(b.acct_open_dt)&gt;=<span class="number">202009</span> <span class="keyword">and</span> a.date_key=<span class="number">202010</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> a.trans_dt, a.acct_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(a.acct_id)&gt;<span class="number">10</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> num_trans <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Reduce the data scope by subquery</strong></li>
</ul>
<p>It’s very necessary to think about your query data scope first when you do a bunch of left outer join, especially, data volume is quite big on your main left table . Below query does a series left join by using all full tables data, but based on business requirement, only partial data is required on the major left table, so it cause somehow resources wasted in reflect on the execution time of 7s</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.*</span><br><span class="line"><span class="keyword">from</span> wfs_trans a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> credit_decision b <span class="keyword">on</span> a.tran_id=b.tran_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> finance_request c <span class="keyword">on</span> a.req_id=c.req_id</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">cast</span>(a.creation_date <span class="keyword">as</span> <span class="built_in">date</span>)&gt;=<span class="string">&#x27;2019-01-01&#x27;</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> creation_date <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>

<p>after revised above query on left table, the execution time reduced to 5s (2000ms)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.*</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line">    <span class="keyword">from</span> wfs_trans </span><br><span class="line">    <span class="keyword">where</span> <span class="keyword">cast</span>(a.creation_date <span class="keyword">as</span> <span class="built_in">date</span>)&gt;=<span class="string">&#x27;2019-01-01&#x27;</span></span><br><span class="line">) <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> credit_decision b <span class="keyword">on</span> a.tran_id=b.tran_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> finance_request c <span class="keyword">on</span> a.req_id=c.req_id</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> a.creation_date <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Paging browse data</strong></li>
</ul>
<p>Business users sometime complaint the SSRS or Power BI report is slow when they browse data by skipping pages, that is not the programming problem because on the backend the query to support the BI report like below</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_cd, post_dt, tran_dt, tran_amt</span><br><span class="line"><span class="keyword">from</span> trans</span><br><span class="line"><span class="keyword">where</span> date_key=<span class="number">202010</span> <span class="keyword">and</span> prod_cd=<span class="string">&#x27;ABCD&#x27;</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> post_dt</span><br><span class="line"><span class="keyword">offset</span> <span class="number">1000000</span> <span class="keyword">rows</span> <span class="keyword">fetch</span> <span class="keyword">next</span> <span class="number">100</span> <span class="keyword">only</span>;</span><br></pre></td></tr></table></figure>

<p>that will take 22s to return results based on 80mm data in single month. Thing thing is even the data is ordered by index column post_dt, database engine doesn’t know where is 1000000 row, it needs to recalculate again, so to answer that business concern, we recommend to apply some conditions parameter then start to browse data like below</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> prod_cd, post_dt, tran_dt, tran_amt</span><br><span class="line"><span class="keyword">from</span> trans</span><br><span class="line"><span class="keyword">where</span> date_key=<span class="number">202010</span> <span class="keyword">and</span> prod_cd=<span class="string">&#x27;ABCD&#x27;</span> <span class="keyword">and</span> post_dt=<span class="string">&#x27;2020-10-15&#x27;</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> post_dt</span><br><span class="line"><span class="keyword">offset</span> <span class="number">1000</span> <span class="keyword">rows</span> <span class="keyword">fetch</span> <span class="keyword">next</span> <span class="number">100</span> <span class="keyword">only</span>;</span><br></pre></td></tr></table></figure>

<p>by this way, the report will be presented by less than 1s.</p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/SQL-query-SQL-Server-optimization/">SQL, query, SQL Server, optimization</a></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_telegram"></a><a class="a2a_button_whatsapp"></a><a class="a2a_button_reddit"></a></div><script src="https://static.addtoany.com/menu/page.js" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/12/02/Sandbox-solution-for-BI-reporting-and-business-analytics/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Sandbox solution for BI reporting and business analytics</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/11/27/How-to-let-local-images-display-on-your-hexo-blog-website/"><span class="level-item">How to let local images display on your hexo blog website</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://hermanteng19.github.io/2020/11/30/A-little-thought-on-SQL-query-performance-optimization-1/';
            this.page.identifier = '2020/11/30/A-little-thought-on-SQL-query-performance-optimization-1/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'herman-hexo-blog' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar1.png" alt="Herman"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Herman</p><p class="is-size-6 is-block">Data Analyst&amp;Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Toronto, Canada</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">10</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">10</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/HermanTeng19" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/HermanTeng19"><i class="fab fa-github"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Before-writing-a-query"><span class="level-left"><span class="level-item">1</span><span class="level-item">Before writing a query</span></span></a></li><li><a class="level is-mobile" href="#SQL-query-optimization-tips"><span class="level-left"><span class="level-item">2</span><span class="level-item">SQL query optimization tips</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="column-right-shadow is-hidden-widescreen"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/avatar1.png" alt="Herman-blog" height="28"></a><p class="is-size-7"><span>&copy; 2020 Herman Teng</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>